
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://raul-profesor.github.io/PARE/routers_y_rutas_estaticas/">
      
      
        <link rel="prev" href="../dtp/">
      
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="zensical-0.0.15">
    
    
      
        <title>Routers y rutas estaticas - PARE - Pr√°cticas de Administraci√≥n de Redes y Equipos</title>
      
    
    
      
        
      
      <link rel="stylesheet" href="../assets/stylesheets/modern/main.f1b6466b.min.css">
      
        
          
        
        <link rel="stylesheet" href="../assets/stylesheets/modern/palette.dfe2e883.min.css">
      
      
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
  
  <style>:root{}</style>


  
  
  
  
  <style>:root{--md-annotation-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M22%2012a10%2010%200%200%201-10%2010A10%2010%200%200%201%202%2012%2010%2010%200%200%201%2012%202a10%2010%200%200%201%2010%2010M6%2013h8l-3.5%203.5%201.42%201.42L17.84%2012l-5.92-5.92L10.5%207.5%2014%2011H6z%22/%3E%3C/svg%3E');}</style>


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,500,500i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Inter";--md-code-font:"JetBrains Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
      <link rel="stylesheet" href="https://unpkg.com/katex@0/dist/katex.min.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,t)=>(e<<5)-e+t.charCodeAt(0)),0),__md_get=(e,t=localStorage,a=__md_scope)=>JSON.parse(t.getItem(a.pathname+"."+e)),__md_set=(e,t,a=localStorage,_=__md_scope)=>{try{a.setItem(_.pathname+"."+e,JSON.stringify(t))}catch(e){}},document.documentElement.setAttribute("data-platform",navigator.platform)</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config",""),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#como-envian-paquetes-los-hosts-finales" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href=".." title="PARE - Pr√°cticas de Administraci√≥n de Redes y Equipos" class="md-header__button md-logo" aria-label="PARE - Pr√°cticas de Administraci√≥n de Redes y Equipos" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-book-open" viewBox="0 0 24 24"><path d="M12 7v14M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-menu" viewBox="0 0 24 24"><path d="M4 5h16M4 12h16M4 19h16"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            PARE - Pr√°cticas de Administraci√≥n de Redes y Equipos
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Routers y rutas estaticas
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="blue"  aria-label="Cambiar a modo oscuro"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Cambiar a modo oscuro" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="deep-orange"  aria-label="Cambiar a modo claro"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Cambiar a modo claro" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-search" viewBox="0 0 24 24"><path d="m21 21-4.34-4.34"/><circle cx="11" cy="11" r="8"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog" aria-label="Buscar">
  <button type="button" class="md-search__button">
    Buscar
  </button>
</div>
      
    
    <div class="md-header__source">
      
    </div>
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navegaci√≥n" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="PARE - Pr√°cticas de Administraci√≥n de Redes y Equipos" class="md-nav__button md-logo" aria-label="PARE - Pr√°cticas de Administraci√≥n de Redes y Equipos" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-book-open" viewBox="0 0 24 24"><path d="M12 7v14M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"/></svg>

    </a>
    PARE - Pr√°cticas de Administraci√≥n de Redes y Equipos
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Index
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../SecSwitches/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    üöÄ Gu√≠a Completa de Seguridad en Switches Cisco
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../cheatsheet_routers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cheatsheet routers
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../dtp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DTP (Dynamic Trunking Protocol)
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Routers y rutas estaticas
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Routers y rutas estaticas
  

    
  </span>
  
  

      </a>
      
        


<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#como-envian-paquetes-los-hosts-finales" class="md-nav__link">
    <span class="md-ellipsis">
      
        C√≥mo env√≠an paquetes los hosts finales
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fundamentos-de-routing" class="md-nav__link">
    <span class="md-ellipsis">
      
        Fundamentos de routing
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#la-tabla-de-enrutamiento" class="md-nav__link">
    <span class="md-ellipsis">
      
        La tabla de enrutamiento
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="La tabla de enrutamiento">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rutas-conectadas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Rutas conectadas
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rutas-locales" class="md-nav__link">
    <span class="md-ellipsis">
      
        Rutas locales
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eleccion-de-rutas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Elecci√≥n de rutas
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rutas-estaticas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Rutas est√°ticas
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Rutas est√°ticas">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configurando-rutas-estaticas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configurando rutas est√°ticas
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rutas-estaticas-especificando-el-proximo-salto" class="md-nav__link">
    <span class="md-ellipsis">
      
        Rutas est√°ticas especificando el pr√≥ximo salto
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rutas-estaticas-especificando-la-interfaz-de-salida" class="md-nav__link">
    <span class="md-ellipsis">
      
        Rutas est√°ticas especificando la interfaz de salida
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rutas-estaticas-especificando-tanto-el-interfaz-de-salida-como-el-proximo-salto" class="md-nav__link">
    <span class="md-ellipsis">
      
        Rutas est√°ticas especificando tanto el interfaz de salida como el pr√≥ximo salto
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configurando-una-ruta-por-defecto" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configurando una ruta por defecto
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resumen" class="md-nav__link">
    <span class="md-ellipsis">
      
        Resumen
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  

  <h1>Routers y rutas estaticas</h1>

<p>En esta unidad vamos a tratar los siguientes puntos:</p>
<ul>
<li>C√≥mo los hosts finales env√≠an paquetes IP a destinos locales y remotos</li>
<li>El proceso de enrutamiento</li>
<li>Lectura e interpretaci√≥n de la tabla de enrutamiento de un router</li>
<li>Configuraci√≥n de rutas est√°ticas en un router</li>
<li>Uso de rutas predeterminadas para proporcionar conectividad a Internet</li>
</ul>
<p>Estos aspectos aspectos tienen cierta correspondencia con los siguientes puntos del CCNA:</p>
<ol>
<li>Interpretar los componentes de una tabla de enrutamiento</li>
<li>Determinar c√≥mo un router toma una decisi√≥n de reenv√≠o (<em>forwarding</em>) por defecto</li>
<li>Configurar y verificar el enrutamiento est√°tico IPv4 e IPv6</li>
</ol>
<p>El t√©rmino <em>enrutamiento</em> puede referirse a dos procesos diferentes: el proceso mediante el cual los routers crean su <strong>tabla de enrutamiento</strong> (una base de datos de destinos conocidos y c√≥mo reenviar paquetes hacia ellos) y el proceso de reenv√≠o de paquetes.</p>
<p>Abordaremos pues ambos aspectos del enrutamiento.</p>
<h2 id="como-envian-paquetes-los-hosts-finales">C√≥mo env√≠an paquetes los hosts finales</h2>
<p>Antes de examinar los detalles de c√≥mo los routers reenv√≠an paquetes IP, echemos un ojo a los hosts finales que se env√≠an dichos paquetes entre s√≠. Despu√©s de que un host prepare un paquete para enviarlo a otro, debe encapsularlo en una trama. Si bien nos centramos en el enrutamiento, es decir un proceso de Capa 3, ¬°no nos olvidemos de la Capa 2! Los paquetes nunca se env√≠an por cable (u ondas de radio) sin estar encapsulados en una trama.</p>
<p>La direcci√≥n MAC de destino de la trama depende de la direcci√≥n IP de destino del paquete. Si el paquete est√° destinado a un host en la misma red que el emisor, la direcci√≥n MAC de destino ser√° la del host de destino; en este caso, no se necesita un router porque <strong>ya sabemos que el router sirve para conectar redes diferentes</strong>.</p>
<p>La imagen de abajo muestra este proceso cuando el PC1 env√≠a un paquete a el PC2. Las direcciones IP y MAC de destino son ambas de el PC2; No es necesario que R1 enrute el paquete porque el origen y el destino est√°n en la misma red (la red 192.168.1.0/24).</p>
<p><img alt="" src="../img/image.png" /></p>
<p>El PC1 (192.168.1.11) env√≠a un paquete al PC2 (192.168.1.12). Dado que ambos se encuentran en la misma red (192.168.1.0/24), el PC1 encapsula el paquete en una trama dirigida a la direcci√≥n MAC de el PC2. El PC1 no necesita enviar el paquete a R1 para su enrutamiento.</p>
<p>Este diagrama presupone que el PC1 ya conoce la direcci√≥n MAC de el PC2; de lo contrario, primero enviar√° una solicitud ARP para obtenerla, tal y como ya hemos visto anteriormente en el curso.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Un icono de nube, como el que se muestra en la figura anterior, se utiliza a menudo para representar Internet, aunque no siempre. Un icono de nube puede utilizarse para obviar elementos que no son relevantes para el diagrama. La nube en la figura indica que R1 se conecta a otra red, cuyos detalles no son relevantes para el diagrama. Esa otra red podr√≠a ser internet o otra parte de la red de la misma empresa.</p>
</div>
<p>Por otro lado, si un host final, como un PC, desea enviar un paquete a un destino fuera de su red local, debe enviarlo a su puerta de enlace predeterminada (el router que proporciona conectividad a otras redes,  tambi√©n conocido como <strong><em>gateway</em></strong>). En la imagen de abajo, R1 es la puerta de enlace predeterminada de la red 192.168.1.0/24.</p>
<p>Para que PC1 y PC2 env√≠en paquetes a destinos fuera de 192.168.1.0/24, deben encapsular el paquete en una trama dirigida a la direcci√≥n MAC de la interfaz G0/0 de R1.</p>
<p>En la imagen se muestra c√≥mo PC1 env√≠a un paquete a PC3: encapsula el paquete en una trama dirigida a la direcci√≥n MAC de la interfaz G0/0 de R1. A continuaci√≥n, R1 reenv√≠a el paquete fuera de su interfaz G0/1, encapsulado en una nueva trama dirigida a la direcci√≥n MAC de PC3.</p>
<p><img alt="" src="../img/image2.png" /></p>
<p>PC1 (192.168.1.11) env√≠a un paquete a PC3 (192.168.2.11). Dado que PC1 y PC3 se encuentran en redes separadas, PC1 env√≠a el paquete en una trama dirigida a la direcci√≥n MAC de su puerta de enlace predeterminada: la de la interfaz G0/0 de R1. R1 reenv√≠a el paquete desde su interfaz G0/1, encapsulado en una nueva trama dirigida a la direcci√≥n MAC de PC3.</p>
<p>Este diagrama supone que PC1 ya conoce la direcci√≥n MAC G0/0 de R1; de lo contrario, PC1 enviar√° una solicitud ARP para obtenerla. Asimismo, R1 tambi√©n debe obtener la direcci√≥n MAC de PC3.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>La direcci√≥n IP de la puerta de enlace predeterminada suele ser la primera direcci√≥n utilizable de la red. Por ejemplo, en la red 192.168.1.0/24, es 192.168.1.1, y en la red 192.168.2.0/24, es 192.168.2.1. Esto no tiene por qu√© ser as√≠, pero es una pr√°ctica muy com√∫n. Las direcciones IP de los ordenadores, por otro lado, son arbitrarias. En los ejemplos las direcciones IP de los ordenadores terminan en .11 y .12, pero por ning√∫n motivo concreto.</p>
</div>
<p>¬øC√≥mo sabe el PC1 cu√°l es su puerta de enlace predeterminada?</p>
<p>Un host final puede conocer la direcci√≥n IP de su puerta de enlace predeterminada de dos maneras. La primera es mediante la configuraci√≥n manual, en la que un administrador especifica manualmente la puerta de enlace predeterminada en cada dispositivo. Sin embargo, esto es muy poco com√∫n en dispositivos de usuario como los PC; suelen utilizar el segundo m√©todo (el Protocolo de Configuraci√≥n Din√°mica de Host o <strong>DHCP</strong>) para conocer autom√°ticamente informaci√≥n como la direcci√≥n IP de su puerta de enlace predeterminada, as√≠ como su propia direcci√≥n IP.</p>
<p>En un dispositivo Windows, podemos usar el comando <code>ipconfig</code> en la aplicaci√≥n <em>S√≠mbolo del sistema</em> para ver informaci√≥n como la direcci√≥n IP del dispositivo, la m√°scara de red (<em>Subnet Mask</em> en la salida del comando) y la puerta de enlace predeterminada. El siguiente ejemplo muestra la salida de este comando en el PC1:</p>
<div class="language-rd highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>C:<span class="k">\Users\alumno</span>&gt; ipconfig
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>. . .
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>Ethernet adapter Local Area Connection:
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>   Connection-specific DNS Suffix  . : 
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>   IPv4 Address. . . . . . . . . . . : 192.168.1.11
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>   Subnet Mask . . . . . . . . . . . : 255.255.255.0
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>   Default Gateway . . . . . . . . . : 192.168.1.1
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>. . .
</span></code></pre></div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>La puerta de enlace predeterminada de un host se configura como una direcci√≥n IP, no como una direcci√≥n MAC. Para conocer la direcci√≥n MAC de la puerta de enlace predeterminada, el host debe enviar una solicitud ARP a su direcci√≥n IP.</p>
</div>
<p>Hay un par de puntos principales que se deben tener en cuenta en esta secci√≥n: primero, para enviar un paquete a un destino en la misma red, un host encapsular√° el paquete (dirigido a la direcci√≥n IP del host de destino) en una trama dirigida a la direcci√≥n MAC del host de destino. El segundo punto es que, para enviar un paquete a un destino en una red diferente, el host emisor encapsular√° el paquete (dirigido a la direcci√≥n IP del host de destino) en una trama dirigida a la direcci√≥n MAC de la puerta de enlace predeterminada. En cualquier caso, se debe usar ARP para obtener la direcci√≥n MAC adecuada (la del host de destino o la de la puerta de enlace predeterminada).</p>
<h2 id="fundamentos-de-routing">Fundamentos de routing</h2>
<p>En el apartado anterior hemos visto c√≥mo un host env√≠a paquetes a destinos fuera de su red local; env√≠a cada paquete en una trama dirigida a la direcci√≥n MAC de la puerta de enlace predeterminada.</p>
<p>Ahora examinaremos c√≥mo la puerta de enlace predeterminada (un router) realiza su funci√≥n de reenv√≠o de paquetes entre redes, lo que se denomina enrutamiento. La imagen de m√°s abajo ofrece una descripci√≥n general de c√≥mo R1 reenv√≠a un paquete de PC1 a PC3.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>La tabla de enrutamiento de R1 en la imagen est√° simplificada; examinaremos la tabla de enrutamiento completa de R1 m√°s adelante.</p>
</div>
<p>Cuando un router recibe una trama destinada a su propia direcci√≥n MAC, la desencapsula para examinar el paquete que contiene (si el destino no es su propia direcci√≥n MAC, la descarta). Si la direcci√≥n IP de destino del paquete es su propia direcci√≥n IP, contin√∫a desencapsulando el mensaje; es un mensaje para el router.</p>
<p>Sin embargo, si la direcci√≥n IP de destino del paquete no es su propia direcci√≥n IP, el router intentar√° enrutarlo hacia su destino. Para ello, busca la direcci√≥n IP de destino del paquete en su tabla de enrutamiento para encontrar una ruta adecuada. Si encuentra una ruta adecuada, reenv√≠a el paquete seg√∫n esa ruta. De lo contrario, lo descarta.</p>
<p><img alt="" src="../img/image3.png" /></p>
<p>En la figura de arriba, R1 recibe un paquete de PC1 y lo reenv√≠a a PC3:</p>
<ol>
<li>R1 recibe una trama en su interfaz G0/0. La trama est√° dirigida a la direcci√≥n MAC de R1, por lo que examina el paquete que contiene.</li>
<li>R1 busca la direcci√≥n IP de destino del paquete en su tabla de enrutamiento. 192.168.2.11 pertenece a la red 192.168.2.0/24, por lo que selecciona esa ruta para reenviarlo. </li>
<li>R1 encapsula el paquete en una nueva trama destinada a la direcci√≥n MAC de PC3 y lo reenv√≠a fuera de la interfaz especificada por la ruta (G0/1).</li>
</ol>
<h2 id="la-tabla-de-enrutamiento">La tabla de enrutamiento</h2>
<p>La tabla de enrutamiento de un router es una base de datos de destinos conocidos por el router. Puede considerarse como un conjunto de instrucciones:</p>
<ul>
<li>Para enviar un paquete al destino X, reenv√≠alo al siguiente salto Y.</li>
<li>O bien, si el destino est√° en una red conectada directamente, reenv√≠alo directamente al destino.</li>
<li>O bien, si el destino es la direcci√≥n IP del router, contin√∫a desencapsulando el mensaje (no reenv√≠es el paquete).</li>
</ul>
<p>El ejemplo que ve√≠amos en la figura anterior es un ejemplo del segundo tipo de instrucci√≥n: el destino del paquete (PC3, 192.168.2.11) se encuentra en una red conectada directamente a R1 (192.168.2.0/24), por lo que R1 reenv√≠a el paquete directamente al destino (encapsul√°ndolo en una trama dirigida a PC3).</p>
<p>A diferencia de los switches, que pueden generar su tabla de direcciones MAC autom√°ticamente sin necesidad de configuraci√≥n, la tabla de enrutamiento de un router estar√° vac√≠a por defecto; no podr√° reenviar paquetes.</p>
<p>El siguiente ejemplo muestra la tabla de enrutamiento de R1 antes de cualquier configuraci√≥n. El comando para ver la tabla de enrutamiento es <code>show ip route</code>:</p>
<div class="language-rd highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>R1# show ip route
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>       D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>       N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>       E1 - OSPF external type 1, E2 - OSPF external type 2
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>       i - IS-IS, su - IS-IS summary, L1 - IS-IS level-1, L2 - IS-IS level-2
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>       ia - IS-IS inter area, * - candidate default, U - per-user static route
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>       o - ODR, P - periodic downloaded static route, H - NHRP, l - LISP
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>       a - application route
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>       + - replicated route, <span class="c">% - next hop override, p - overrides from PfR</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>Gateway of last resort is not set
</span></code></pre></div>
<p>Sin ninguna configuraci√≥n, la salida muestra algunos c√≥digos que representan los diferentes tipos de ruta que podr√≠an aparecer en la tabla de enrutamiento. Finalmente, <em>Gateway of last resort is not set</em> indica que R1 no tiene una ruta predeterminada, algo que abordaremos m√°s adelante.</p>
<p>Configuremos R1 y veamos c√≥mo cambia la salida de <code>show ip route</code>. Primero, no configuraremos ninguna ruta; en lugar de eso, configuremos las direcciones IP de R1 y habiliaremos sus interfaces, como en el siguiente ejemplo:</p>
<div class="language-rd highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>R1# configure terminal
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>R1(config)# interface g0/0
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>R1(config-if)# ip address 192.168.1.1 255.255.255.0
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>R1(config-if)# no shutdown
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>R1(config-if)# interface g0/1
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>R1(config-if)# ip address 192.168.2.1 255.255.255.0
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>R1(config-if)# no shutdown
</span></code></pre></div>
<p>Las interfaces de R1 ahora est√°n configuradas seg√∫n los diagramas anteriores: 192.168.1.1/24 en G0/0 y 192.168.2.1/24 en G0/1. Ahora, examinemos de nuevo la tabla de enrutamiento de R1 y veamos qu√© ha cambiado (omitiendo algunos c√≥digos para ahorrar espacio):</p>
<div class="language-rd highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>R1# show ip route
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>. . .
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>Gateway of last resort is not set
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>      192.168.1.0/24 is variably subnetted, 2 subnets, 2 masks
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>C        192.168.1.0/24 is directly connected, GigabitEthernet0/0
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>L        192.168.1.1/32 is directly connected, GigabitEthernet0/0
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>      192.168.2.0/24 is variably subnetted, 2 subnets, 2 masks
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>C        192.168.2.0/24 is directly connected, GigabitEthernet0/1
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>L        192.168.2.1/32 is directly connected, GigabitEthernet0/1
</span></code></pre></div>
<p>Con solo configurar las direcciones IP y habilitar las dos interfaces de R1, R1 ha inseratdo cuatro rutas en su tabla de enrutamiento: dos rutas conectadas (indicadas por el c√≥digo <code>C</code>) y dos rutas locales (indicadas por el c√≥digo <code>L</code>).</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>La l√≠nea <code>192.168.1.0/24 is variably subnetted, 2 subnets, 2 masks</code> no es una ruta. Esta afirmaci√≥n significa que en la tabla de enrutamiento hay dos rutas a subredes que encajan en la red de clase C 192.168.1.0/24, con dos m√°scaras de red diferentes (/24 y /32). Lo mismo aplica a la l√≠nea similar sobre 192.168.2.0/24. </p>
</div>
<h3 id="rutas-conectadas">Rutas conectadas</h3>
<p>Una ruta conectada es una ruta a la red a la que est√° conectada una interfaz. Se a√±ade autom√°ticamente una ruta conectada a la tabla de enrutamiento por cada interfaz que tenga una direcci√≥n IP y est√© activa (se puede comprobar el estado de la interfaz con <code>show ip interface brief</code>). Por ejemplo, la interfaz G0/0 de R1 tiene la direcci√≥n IP 192.168.1.1/24, por lo que agrega autom√°ticamente una ruta a la red 192.168.1.0/24 a su tabla de enrutamiento.</p>
<p>Una ruta conectada indicar√° que la red est√° conectada directamente y tambi√©n indicar√° a qu√© interfaz est√° conectada. Para ver solo las rutas conectadas en la tabla de enrutamiento de R1, en el siguiente ejemplo, filtro la salida usando la barra vertical <code>|</code> seguida de <code>include C</code> para mostrar solo las l√≠neas que incluyen <code>C</code>:</p>
<div class="language-rd highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>R1# show ip route | include C
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>C        192.168.1.0/24 is directly connected, GigabitEthernet0/0
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>C        192.168.2.0/24 is directly connected, GigabitEthernet0/1
</span></code></pre></div>
<p>Con estas rutas en su tabla de enrutamiento, R1 sabe que para reenviar un paquete a un host con una direcci√≥n IP en las redes 192.168.1.0/24 o 192.168.2.0/24, debe enviar el paquete desde la interfaz especificada en la ruta en una trama dirigida directamente al host de destino. Esto se vio en la imagen de m√°s arriba donde la direcci√≥n IP de destino del paquete era 192.168.2.11 (PC3), por lo que R1 reenvi√≥ el paquete desde la interfaz G0/1 en una trama dirigida a la direcci√≥n MAC de PC3.</p>
<p>A modo de recordatorio r√°pido, la siguiente imagen muestra c√≥mo la ruta a 192.168.1.0/24 incluye todas las direcciones IP desde 192.168.1.0 hasta 192.168.1.255. La parte de red de la direcci√≥n de la ruta es fija, pero la parte del host puede ser cualquier n√∫mero de 8 bits.</p>
<p><img alt="" src="../img/router-%20image4.png" /></p>
<p>Direcci√≥n IP y longitud del prefijo (expresada como m√°scara de red) de la ruta a 192.168.1.0/24. Debido a la longitud del prefijo /24, los primeros tres octetos son fijos (los bits no pueden cambiar). Sin embargo, el √∫ltimo octeto puede ser cualquier n√∫mero de 8 bits: .1, .11, .100, .179, etc. Esto significa que cualquier paquete con una direcci√≥n IP de destino que comience por 192.168.1 puede reenviarse mediante esta ruta.</p>
<h3 id="rutas-locales">Rutas locales</h3>
<p>Una ruta local es una ruta a la direcci√≥n IP exacta configurada en la interfaz del router.</p>
<p>Al igual que las rutas conectadas, se agrega autom√°ticamente una ruta local a la tabla de enrutamiento por cada interfaz que tenga una direcci√≥n IP y est√© activa. En el siguiente ejemplo, se utiliza <code>show ip route | include L</code> para ver solo las rutas locales de R1. Tened en cuenta que, al igual que las rutas conectadas, las rutas locales tambi√©n indican que X est√° conectado directamente, seguido de la interfaz:</p>
<div class="language-rd highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>R1# show ip route | include L
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>. . .
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>L        192.168.1.1/32 is directly connected, GigabitEthernet0/0
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>L        192.168.2.1/32 is directly connected, GigabitEthernet0/1
</span></code></pre></div>
<p><strong>Para especificar la direcci√≥n IP exacta de la interfaz, una ruta local utiliza una longitud de prefijo /32</strong>; todos los bits de la m√°scara de red se establecen en 1. Esto se aplica independientemente de la m√°scara de red configurada en la interfaz.</p>
<p>Por ejemplo, aunque ambas interfaces de R1 tienen una longitud de prefijo /24, sus rutas locales son /32. Esto se debe a que una ruta local solo especifica una direcci√≥n IP. Como se mencion√≥ anteriormente, una ruta a 192.168.1.0/24 incluye todas las direcciones IP desde 192.168.1.0 hasta 192.168.1.255; dado que la longitud del prefijo es /24, el octeto final puede ser cualquier n√∫mero entre 0 y 255. Por otro lado, una ruta a 192.168.1.1/32 incluye solo 192.168.1.1, debido a su longitud de prefijo /32; todos los bits se consideran parte de la porci√≥n de red y no se pueden modificar. La figura de arriba muestra la direcci√≥n IP de R1 G0/0 con una longitud de prefijo /32 (escrita como una m√°scara de red).</p>
<p>Una ruta local indica al router que los paquetes destinados a la direcci√≥n IP especificada en la ruta son para √©l mismo; debe continuar desencapsulando el mensaje y examinando su contenido. En este caso, el router no reenv√≠a el paquete, sino que lo recibe. La ruta local es necesaria para distinguir la direcci√≥n IP del router de otras direcciones IP en la red conectada. <strong>Si R1 solo tuviera una ruta conectada a 192.168.1.0/24, pero ninguna ruta local, reenviar√≠a los paquetes destinados a 192.168.1.1 desde su interfaz G0/0, en lugar de recibirlos.</strong></p>
<h2 id="eleccion-de-rutas">Elecci√≥n de rutas</h2>
<p>Cuando un router reenv√≠a un paquete, debe decidir qu√© ruta de su tabla de enrutamiento utilizar√° para reenviarlo, lo que se denomina selecci√≥n de ruta. Para determinar c√≥mo reenviar un paquete en particular, el router seleccionar√° la ruta coincidente m√°s espec√≠fica. Definamos este t√©rmino:</p>
<ul>
<li><u>Ruta coincidente:</u> La direcci√≥n IP de destino del paquete forma parte de la red especificada en la ruta. De lo contrario, el paquete no se puede reenviar utilizando esta ruta.</li>
<li><u>M√°s espec√≠fica:</u> La ruta con la longitud de prefijo m√°s larga.</li>
</ul>
<p>Usemos un ejemplo para aclarar este concepto. La siguiente figura muestra el proceso de selecci√≥n de ruta cuando R1 recibe un paquete dirigido a 192.168.1.1. La direcci√≥n IP de destino del paquete coincide con dos rutas en la tabla de enrutamiento de R1, por lo que selecciona la m√°s espec√≠fica.</p>
<p><img alt="" src="../img/router-%20image5.png" /></p>
<p>R1 recibe un paquete y seleccionar√° la mejor ruta para √©l:</p>
<ol>
<li>R1 recibe una trama en su interfaz G0/0. La MAC de destino es la suya, por lo que la desencapsula y examina el paquete que contiene.</li>
<li>La direcci√≥n IP de destino del paquete es 192.168.1.1. R1 realiza una b√∫squeda en la tabla de enrutamiento y descubre que dos rutas coinciden con la direcci√≥n IP de destino del paquete: la ruta conectada a 192.168.1.0/24 y la ruta local a 192.168.1.1/32. R1 selecciona la ruta m√°s espec√≠fica: 192.168.1.1/32.</li>
<li>Dado que R1 selecciona una ruta local, recibe el paquete por s√≠ mismo; no lo reenv√≠a.</li>
</ol>
<p>Una ruta con un prefijo /24 incluye 256 direcciones IP diferentes. Por ejemplo, 192.168.1.0/24 incluye las rutas de 192.168.1.0 a 192.168.1.255. Por otro lado, una ruta con un prefijo /32 solo incluye una direcci√≥n IP, por lo que una ruta /32 es m√°s espec√≠fica que una ruta /24. De hecho, una ruta /32 es la m√°s espec√≠fica posible; si la direcci√≥n IP de destino de un paquete coincide con una ruta /32, esa ruta siempre se seleccionar√° para ese paquete, independientemente de cu√°ntas otras rutas coincidentes haya. </p>
<p><strong>¬øQu√© sucede si no hay ninguna ruta en la tabla de enrutamiento que coincida con la direcci√≥n IP de destino de un paquete?</strong> En ese caso, el router descartar√° el paquete; no inundar√° todos los puertos como lo hacen los switches con tramas unicast desconocidas.</p>
<p>Un switch a veces inunda de tramas, pero un router nunca inunda de paquetes; reenv√≠a el paquete, lo recibe para s√≠ mismo o lo descarta. Esta tabla resume las acciones que un router puede realizar en un paquete:</p>
<table>
<thead>
<tr>
<th>Condiciones de coincidencia</th>
<th>Acci√≥n del router</th>
</tr>
</thead>
<tbody>
<tr>
<td>La direcci√≥n IP de destino del paquete coincide con una o m√°s rutas no locales.</td>
<td>Reenviar el paquete seg√∫n la ruta coincidente m√°s espec√≠fica</td>
</tr>
<tr>
<td>La direcci√≥n IP de destino del paquete coincide con una ruta local.</td>
<td>Recibir el paquete</td>
</tr>
<tr>
<td>La direcci√≥n IP de destino del paquete no coincide con ninguna ruta.</td>
<td>Descartar el paquete</td>
</tr>
</tbody>
</table>
<h2 id="rutas-estaticas">Rutas est√°ticas</h2>
<p>El proceso de reenv√≠o de paquetes descrito en la secci√≥n anterior se denomina enrutamiento, pero el t√©rmino enrutamiento tambi√©n se utiliza para referirse a los procesos que utilizan los routers para aprender rutas. Adem√°s de las rutas conectadas y locales que un router inserta autom√°ticamente en su tabla de enrutamiento, existen dos m√©todos principales mediante los cuales los routers pueden aprender rutas:</p>
<p><u><strong>Enrutamiento din√°mico:</strong></u> Los routers utilizan protocolos de enrutamiento din√°mico para compartir informaci√≥n entre s√≠ y crear sus tablas de enrutamiento.</p>
<p><u><strong>Enrutamiento est√°tico:</strong></u> Un ingeniero/administrador configura manualmente las rutas en el router.</p>
<p>Las rutas conectadas permiten al router reenviar paquetes a destinos en redes conectadas directamente a √©l, y las rutas locales permiten al router recibir paquetes destinados a sus propias direcciones IP. Sin embargo, para reenviar paquetes a destinos que no est√°n en redes conectadas directamente, el router debe aprender de esos destinos mediante uno de los m√©todos mencionados anteriormente (abordaremos el enrutamiento din√°mico en los cap√≠tulos 17 y 18).</p>
<p>Al reenviar un paquete a un destino que no est√° conectado directamente al router, este debe encapsularlo en una trama dirigida a la direcci√≥n MAC del siguiente salto, que corresponde al siguiente router en la ruta hacia el destino. Aqu√≠ se puede ver este proceso:</p>
<p><img alt="" src="../img/router-%20image6.png" /></p>
<p>PC1 env√≠a un paquete a PC3 a trav√©s de R1, R2 y R3:</p>
<ol>
<li>PC1 env√≠a el paquete en una trama a R1 G0/1. R1 lo recibe y realiza una b√∫squeda en la tabla de enrutamiento.</li>
<li>R1 reenv√≠a el paquete en una trama a R2 G0/0. R2 lo recibe y realiza una b√∫squeda en la tabla de enrutamiento.</li>
<li>R2 reenv√≠a el paquete en una trama a la MAC de R3 G0/0. R3 recibe el paquete y realiza una b√∫squeda en la tabla de enrutamiento. (4) R3 reenv√≠a el paquete en una trama a PC3, que lo recibe y lo procesa.</li>
</ol>
<p>La imagen anterior muestra c√≥mo los routers reenv√≠an paquetes hacia destinos remotos (no conectados directamente). </p>
<p>Sin embargo, los routers no tienen estas rutas en sus tablas de enrutamiento por defecto; estas rutas deben configurarse manualmente. Sin configurar ninguna ruta est√°tica, si R1 recibe un paquete de PC1 con destino a 192.168.3.11, no encontrar√° ninguna ruta coincidente al realizar la b√∫squeda en la tabla de enrutamiento. No tendr√° m√°s remedio que descartar el paquete. La siguiente tabla enumera las redes que cada router del ejemplo anterior reconoce sin configurar rutas est√°ticas.</p>
<table>
<thead>
<tr>
<th>Router</th>
<th>Redes conocidas</th>
<th>Redes desconocidas</th>
</tr>
</thead>
<tbody>
<tr>
<td>R1</td>
<td>192.168.1.0/24<br>192.168.12.0/24</td>
<td>192.168.3.0/24<br>192.168.23.0/24</td>
</tr>
<tr>
<td>R2</td>
<td>192.168.12.0/24<br>192.168.23.0/24</td>
<td>192.168.1.0/24<br>192.168.3.0/24</td>
</tr>
<tr>
<td>R3</td>
<td>192.168.3.0/24<br>192.168.23.0/24</td>
<td>192.168.1.0/24<br>192.168.12.0/24</td>
</tr>
</tbody>
</table>
<p>Dado el objetivo de habilitar la comunicaci√≥n bidireccional entre PC1 y PC3, ¬øqu√© rutas debemos configurar? Al observar la tabla, se podr√≠a suponer que debemos configurar seis rutas para que cada router conozca todas las redes dentro de la red principal.</p>
<p>Sin embargo, para reenviar paquetes entre dos hosts, cada router solo necesita rutas a las redes de los hosts que se comunican (PC1 y PC3). R1, por ejemplo, no necesita conocer la red entre R2 y R3 (192.168.23.0/24); R1 solo necesita saber que para reenviar un paquete a un destino en 192.168.3.0/24, debe reenviarlo a R2. La Figura de m√°s abajo demuestra este concepto: si configuramos una ruta a 192.168.3.0/24 en R1, con la direcci√≥n IP de R2 especificada como el siguiente salto, R1 podr√° reenviar el paquete a R2. No necesita saber los detalles de la ruta que tomar√° el paquete despu√©s de R2; solo necesita saber que R2 es el siguiente salto.</p>
<p>R1 reenv√≠a un paquete destinado a 192.168.3.11 (PC3). R1 ‚Äã‚Äãtiene una ruta est√°tica a 192.168.3.0/24 a trav√©s de 192.168.12.2 (R2). R1 ‚Äã‚Äãsabe que para reenviar un paquete hacia la red 192.168.3.0/24, debe reenviarlo a R2. R1 desconoce los detalles de la ruta que tomar√° el paquete despu√©s de R2, y no est√° obligado a conocerlos.</p>
<p>En resumen, cada router necesita una ruta a 192.168.3.0/24 para poder reenviar paquetes de PC1 a PC3 y una ruta a 192.168.1.0/24 para poder reenviar paquetes de PC3 a PC1. El R1 ya tiene una ruta conectada a 192.168.1.0/24, y el R3 ya tiene una ruta conectada a 192.168.3.0/24. La Tabla 9.3 enumera las rutas est√°ticas que debemos configurar para habilitar la comunicaci√≥n bidireccional entre el PC1 y el PC3.</p>
<table>
<thead>
<tr>
<th>Router</th>
<th>Rutas necesarias</th>
<th>Pr√≥ximo salto</th>
</tr>
</thead>
<tbody>
<tr>
<td>R1</td>
<td>192.168.3.0/24</td>
<td>192.168.12.2 (R2 G0/0)</td>
</tr>
<tr>
<td>R2</td>
<td>192.168.1.0/24</td>
<td>192.168.12.1 (R1 G0/0)</td>
</tr>
<tr>
<td>R2</td>
<td>192.168.3.0/24</td>
<td>192.168.23.2 (R3 G0/0)</td>
</tr>
<tr>
<td>R3</td>
<td>192.168.1.0/24</td>
<td>192.168.23.1 (R2 G0/1)</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>En este ejemplo, nos referimos a las rutas necesarias para habilitar la comunicaci√≥n bidireccional entre el PC1 y el PC3. Si bien no es necesario para tal fin, no hay problema en configurar una ruta a 192.168.23.0/24 en el R1 y una ruta a 192.168.12.0/24 en el R3.</p>
</div>
<h3 id="configurando-rutas-estaticas">Configurando rutas est√°ticas</h3>
<p>El comando para configurar una ruta est√°tica es, desde el modo de configuraci√≥n global, <code>ip route</code>. Sin embargo, existen diferentes opciones en cuanto a los argumentos que se proporcionan con el comando:</p>
<ul>
<li><code>ip route red-destino m√°scara pr√≥ximo-salto</code></li>
<li><code>ip route red-destino m√°scara interfaz-salida</code></li>
<li><code>ip route red-destino m√°scara interfaz-salida pr√≥ximo-salto</code></li>
</ul>
<h3 id="rutas-estaticas-especificando-el-proximo-salto">Rutas est√°ticas especificando el pr√≥ximo salto</h3>
<p>Se puede configurar una ruta est√°tica especificando la direcci√≥n de red de destino, la m√°scara de red y la direcci√≥n IP del siguiente salto.</p>
<p>Aqu√≠ se muestran los comandos para configurar cada una de las rutas necesarias en R1, R2 y R3.</p>
<p><img alt="" src="../img/router-%20image8.png" /></p>
<p>Las rutas especifican la direcci√≥n IP del siguiente salto. R1 requiere una ruta a 192.168.3.0/24, R2 requiere rutas a 192.168.1.0/24 y 192.168.3.0/24, y R3 requiere una ruta a 192.168.1.0/24.</p>
<p>Una ruta est√°tica que especifica √∫nicamente la direcci√≥n IP del siguiente salto se denomina <strong>ruta est√°tica recursiva</strong>. El nombre recursivo se debe a que requiere m√∫ltiples b√∫squedas en la tabla de enrutamiento para reenviar un paquete:</p>
<ul>
<li>Una b√∫squeda para encontrar la direcci√≥n IP del siguiente salto</li>
<li>Una b√∫squeda para encontrar la interfaz a la que est√° conectado el siguiente salto</li>
</ul>
<p>Para demostrarlo, observemos la tabla de enrutamiento de R1 en el siguiente ejemplo. Cuando R1 recibe un paquete destinado a 192.168.3.11, descubre que la ruta coincidente m√°s espec√≠fica (de hecho, la √∫nica ruta coincidente) es la est√°tica:</p>
<div class="language-rd highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>R1# show ip route
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>. . .
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>      192.168.1.0/24 is variably subnetted, 2 subnets, 2 masks
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>C        192.168.1.0/24 is directly connected, GigabitEthernet0/1
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>L        192.168.1.1/32 is directly connected, GigabitEthernet0/1
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>S     192.168.3.0/24 [1/0] via 192.168.12.2
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>      192.168.12.0/24 is variably subnetted, 2 subnets, 2 masks
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>C        192.168.12.0/24 is directly connected, GigabitEthernet0/0
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>L        192.168.12.1/32 is directly connected, GigabitEthernet0/0
</span></code></pre></div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>El [1/0] en la ruta est√°tica indica la distancia administrativa (AD) y la m√©trica de la ruta, respectivamente. La AD y la m√©trica se abordar√°n en temas posteriores; no son relevantes para este.</p>
</div>
<p>La ruta est√°tica indica <code>S 192.168.3.0/24 [1/0] v√≠a 192.168.12.2</code> (n√≥tese el c√≥digo <code>S</code> para est√°tica), pero esta informaci√≥n por s√≠ sola no le indica a R1 por qu√© interfaz reenviar el paquete. Para obtenerla, realiza una segunda b√∫squeda de la direcci√≥n IP del siguiente salto: 192.168.12.2. La ruta m√°s espec√≠fica (y la √∫nica) que coincide con 192.168.12.2 es la ruta conectada a 192.168.12.0/24, que especifica la interfaz G0/0. Ahora, despu√©s de dos b√∫squedas, R1 conoce la direcci√≥n IP del siguiente salto y la interfaz por la que reenviar el paquete.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>R1 conoce la direcci√≥n IP del siguiente salto, pero la informaci√≥n que realmente necesita es la direcci√≥n MAC del siguiente salto. Para obtenerla, debe enviar una solicitud ARP a la direcci√≥n IP del siguiente salto.</p>
</div>
<h3 id="rutas-estaticas-especificando-la-interfaz-de-salida">Rutas est√°ticas especificando la interfaz de salida</h3>
<p>En lugar de especificar la direcci√≥n IP del siguiente salto de la ruta, puede especificar la interfaz de salida, es decir, la interfaz desde la que el router debe reenviar los paquetes. El siguiente ejemplo muestra las mismas rutas est√°ticas que hemos visto en la figura anterior, pero configuradas con la interfaz de salida:</p>
<ul>
<li><code>R1(config)# ip route 192.168.3.0 255.255.255.0 g0/0</code></li>
<li><code>R2(config)# ip route 192.168.1.0 255.255.255.0 g0/0</code></li>
<li><code>R2(config)# ip route 192.168.3.0 255.255.255.0 g0/1</code></li>
<li><code>R3(config)# ip route 192.168.1.0 255.255.255.0 g0/0</code></li>
</ul>
<p>Una ruta est√°tica que especifica solo la interfaz de salida se denomina ruta est√°tica <strong>conectada directamente</strong>. Esto se debe a que la ruta aparecer√° como una red conectada directamente en la tabla de enrutamiento. El siguiente ejemplo muestra la ruta a 192.168.3.0/24 en la tabla de enrutamiento de R1:</p>
<div class="language-rd highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>R1# show ip route
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>. . .
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>S     192.168.3.0/24 is directly connected, GigabitEthernet0/0
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>. . .
</span></code></pre></div>
<p>Este tipo de ruta est√°tica tiene una desventaja: dado que R1 considera que la red 192.168.3.0/24 est√° conectada directamente a su interfaz G0/0, intentar√° enviar paquetes en tramas dirigidas directamente a PC3, en lugar de al siguiente salto.</p>
<p>Esto significa que R1 no enviar√° una solicitud ARP para conocer la direcci√≥n MAC del siguiente salto; en su lugar, enviar√° una solicitud ARP para conocer la direcci√≥n MAC de PC3. El problema es que esta solicitud ARP no llegar√° a PC3, sino a R2 (los mensajes de difusi√≥n no van m√°s all√° de su red local). Sin embargo, R2 puede usar una funci√≥n llamada proxy ARP para responder en nombre de PC3, indic√°ndole a R1 que env√≠e el paquete a la direcci√≥n MAC G0/0 de R2. Esto se muestra en la figura 9.10.</p>
<p><img alt="" src="../img/router-%20image9.png" /></p>
<p>Un intercambio ARP proxy entre R1 y R2:</p>
<ol>
<li>R1 env√≠a una solicitud ARP para conocer la direcci√≥n MAC de PC3.</li>
<li>192.168.3.11 no es la direcci√≥n IP de R2, pero R2 tiene una ruta a 192.168.3.0/24 en su tabla de enrutamiento, por lo que R2 usa ARP proxy para responder en nombre de PC3.</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Un router solo usar√° proxy ARP para responder a una solicitud ARP si tiene una ruta al destino en su tabla de enrutamiento. De lo contrario, ignorar√° la solicitud.</p>
</div>
<p>El siguiente ejemplo muestra la tabla ARP de R1 (puede visualizarla con el comando <code>show arp</code>). Observe que se muestra la misma direcci√≥n MAC (<code>Hardware Addr</code>) para 192.168.12.2 y 192.168.3.11: la direcci√≥n MAC de la interfaz G0/0 de R2.</p>
<div class="language-rd highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>R1# show arp
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>Protocol  Address          Age (min)  Hardware Addr   Type   Interface
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>. . .
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>Internet  192.168.3.11            0   5254.0003.e684  ARPA   GigabitEthernet0/0
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>. . .
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>Internet  192.168.12.2            0   5254.0003.e684  ARPA   GigabitEthernet0/0
</span></code></pre></div>
<p>La dependencia del proxy ARP es una desventaja de las rutas est√°ticas conectadas directamente por dos razones.</p>
<ul>
<li>
<p>En primer lugar, aunque el proxy ARP est√° habilitado en los routers Cisco por defecto, en algunos casos puede estar deshabilitado (por ejemplo, si R2 no es un router Cisco). Si el proxy ARP est√° deshabilitado en R2, no responder√° a la solicitud ARP de R1 y R1 no podr√° reenviar el paquete a PC3.</p>
</li>
<li>
<p>La segunda desventaja es que R1 necesitar√° crear una entrada ARP independiente para cada host en 192.168.3.0/24. Considera que cada host en 192.168.3.0/24 est√° conectado directamente, por lo que intentar√° obtener la direcci√≥n MAC de cada host; esto podr√≠a desperdiciar memoria en R1 si hay muchos hosts en la red. Por otro lado, si se especifica la direcci√≥n IP del siguiente salto en lugar de la interfaz de salida, R1 solo necesitar√° una entrada ARP para reenviar paquetes a 192.168.3.0/24: una entrada ARP para el siguiente salto.</p>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Aunque nos centramos en el R1 como ejemplo, lo mismo aplica para el R2, que considerar√° que las redes 192.168.1.0/24 y 192.168.3.0/24 est√°n conectadas directamente, as√≠ como para el R3, que considerar√° que la red 192.168.1.0/24 est√° conectada directamente.</p>
</div>
<p>Deber√≠amos conocer la definici√≥n de rutas est√°ticas conectadas directamente y poder configurarlas, pero debido a las desventajas de depender de ARP proxy, es muy recomendable no usarlas en una red real. En su lugar, debemos utilizar rutas est√°ticas recursivas o la siguiente opci√≥n: rutas est√°ticas completamente especificadas.</p>
<h3 id="rutas-estaticas-especificando-tanto-el-interfaz-de-salida-como-el-proximo-salto">Rutas est√°ticas especificando tanto el interfaz de salida como el pr√≥ximo salto</h3>
<p>La tercera opci√≥n al configurar una ruta est√°tica es especificar tanto la interfaz de salida como el siguiente salto, lo que se denomina ruta est√°tica completamente especificada. Las siguientes son las mismas cuatro rutas est√°ticas, esta vez configuradas como <strong>rutas est√°ticas completamente especificadas</strong>:</p>
<ul>
<li><code>R1(config)# ip route 192.168.3.0 255.255.255.0 g0/0 192.168.12.2</code></li>
<li><code>R2(config)# ip route 192.168.1.0 255.255.255.0 g0/0 192.168.12.1</code></li>
<li><code>R2(config)# ip route 192.168.3.0 255.255.255.0 g0/1 192.168.23.2</code></li>
<li><code>R3(config)# ip route 192.168.1.0 255.255.255.0 g0/0 192.168.23.1</code></li>
</ul>
<p>La ventaja de este tipo de ruta est√°tica es que el router sabe Tanto la direcci√≥n IP del siguiente salto como la interfaz desde la que se reenv√≠a el paquete; no es necesario realizar una b√∫squeda recursiva ni depender de ARP proxy. El siguiente ejemplo muestra c√≥mo aparece una ruta completamente especificada en la tabla de enrutamiento:</p>
<div class="language-rd highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>R1# show ip route
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>. . .
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>S     192.168.3.0/24 [1/0] via 192.168.12.2, GigabitEthernet0/0
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>. . .
</span></code></pre></div>
<p>Este tipo de ruta est√°tica puede parecer la mejor de las tres, pero en realidad, se pueden usar rutas recursivas o est√°ticas completamente especificadas sin una diferencia notable en el rendimiento. Sin embargo, generalmente se deben evitar las rutas est√°ticas conectadas directamente.</p>
<h3 id="configurando-una-ruta-por-defecto">Configurando una ruta por defecto</h3>
<p>La ruta predeterminada es una ruta al destino menos espec√≠fico posible: 0.0.0.0/0. Esta ruta coincide con todas las direcciones IP posibles, desde 0.0.0.0 hasta 255.255.255.255. Al ser la ruta menos espec√≠fica posible, la ruta predeterminada solo se seleccionar√° si no hay rutas m√°s espec√≠ficas en la tabla de enrutamiento del router.</p>
<p>Una ruta predeterminada se utiliza a menudo para proporcionar una ruta a internet. Hay m√°s de un mill√≥n de rutas en la tabla de enrutamiento global de internet, una cantidad muy superior a la que la mayor√≠a de los routers pueden gestionar. Afortunadamente, un router no necesita conocer ninguna red de destino espec√≠fica en internet; si tiene una ruta predeterminada a internet, puede usarla para reenviar paquetes hacia internet, y la infraestructura del proveedor de servicios de internet (ISP) se encargar√° de reenviarlos al destino correcto.</p>
<p>Se pueden usar rutas m√°s espec√≠ficas para destinos en la red corporativa interna, y el resto del tr√°fico (que no coincida con ninguna otra ruta) se enrutar√° utilizando la ruta predeterminada.</p>
<p>La imagen de abajo muestra un ejemplo: R1 tiene rutas espec√≠ficas a 192.168.2.0/24 y 192.168.3.0/24, y luego una ruta predeterminada a internet; los paquetes con destinos que no coincidan con 192.168.2.0/24 o 192.168.3.0/24 (o las rutas conectadas y locales de R1) se reenviar√°n utilizando la ruta predeterminada.</p>
<p><img alt="" src="../img/router-%20image10.png" /></p>
<p>El R1 tiene dos rutas a redes de destino espec√≠ficas y una ruta predeterminada a Internet. (1) Una ruta a 192.168.2.0/24, con R2 G0/0 como siguiente salto. (2) Una ruta a 192.168.3.0/24, con R3 G0/0 como siguiente salto. (3) Una ruta predeterminada, con la direcci√≥n IP del ISP (203.0.113.2) como siguiente salto.</p>
<p>Para configurar una ruta predeterminada, especificamos la red de destino 0.0.0.0 y la m√°scara de red 0.0.0.0 en el comando ip route; esto da como resultado 0.0.0.0/0, que incluye todas las direcciones IP posibles. Si un router no tiene una ruta predeterminada configurada, ver√° la instrucci√≥n <em>¬´Gateway of last resort is not set¬ª</em> encima de las rutas en la tabla de enrutamiento, como se muestra en el siguiente ejemplo. Esto significa que el router no tiene una ruta predeterminada:</p>
<div class="language-rd highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>R1# show ip route
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>. . .
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>Gateway of last resort is not set
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>. . .
</span></code></pre></div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Puerta de enlace de √∫ltimo recurso (<em>gateway of last resort</em>) es otro t√©rmino para la puerta de enlace predeterminada (<em>default gateway</em>). La ruta predeterminada en un router es como la puerta de enlace predeterminada de un PC; se utiliza para reenviar tr√°fico a destinos fuera de las redes conocidas del router.</p>
</div>
<p>Tras configurar las rutas est√°ticas que se mostraban en la figura anterior, el resultado cambia.</p>
<p>En el siguiente ejemplo, se utiliza el comando <code>show ip route static</code> para ver solo las rutas est√°ticas de R1. Observe que la direcci√≥n IP del ISP (203.0.113.2) ahora aparece como la puerta de enlace de √∫ltimo recurso:</p>
<div class="language-rd highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>R1# show ip route static
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>. . .
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>       ia - IS-IS inter area, * - candidate default, U - per-user static route
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>. . .
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>Gateway of last resort is 203.0.113.2 to network 0.0.0.0
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>S*    0.0.0.0/0 [1/0] via 203.0.113.2
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>S     192.168.2.0/24 [1/0] via 192.168.12.2
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a>S     192.168.3.0/24 [1/0] via 192.168.13.2
</span></code></pre></div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>En este mismo tema se ha indicado que un router descartar√° los paquetes que no coincidan con ninguna ruta en su tabla de enrutamiento. Sin embargo, si el router tiene una ruta predeterminada, esta situaci√≥n no ocurrir√°; la ruta predeterminada coincide con todas las direcciones IP. Si un paquete no coincide con una ruta m√°s espec√≠fica, el router lo reenviar√° por la ruta predeterminada en lugar de descartarlo.</p>
</div>
<h2 id="resumen">Resumen</h2>
<ul>
<li>El t√©rmino enrutamiento puede referirse al proceso de reenv√≠o de paquetes entre redes y a la creaci√≥n de una tabla de enrutamiento.</li>
<li>Los hosts de una misma red pueden enviarse paquetes entre s√≠ sin necesidad de un router. Sin embargo, para enviar paquetes a destinos fuera de la red local, se requiere un router.</li>
<li>El router al que un host env√≠a paquetes destinados a redes externas se denomina puerta de enlace predeterminada. El host env√≠a los paquetes en tramas dirigidas a la direcci√≥n MAC de la puerta de enlace predeterminada.</li>
<li>La puerta de enlace predeterminada de un host puede configurarse manualmente o aprenderse autom√°ticamente mediante DHCP.</li>
<li>Puede usar el comando ipconfig en el S√≠mbolo del sistema de Windows para ver informaci√≥n como la direcci√≥n IP, la m√°scara de red y la puerta de enlace predeterminada del PC.</li>
<li>La tabla de enrutamiento es la base de datos de destinos conocidos del router. Es un conjunto de instrucciones sobre qu√© hacer con los paquetes. La tabla de enrutamiento se puede ver con show ip route.</li>
<li>Para cada interfaz que tenga una direcci√≥n IP y est√© activa/activa, el router agregar√° autom√°ticamente dos rutas a su tabla de enrutamiento: una ruta conectada y una ruta local. Una ruta conectada es una ruta a la red a la que est√° conectada una interfaz. Las rutas conectadas se indican mediante el c√≥digo C en la tabla de enrutamiento. Si un router recibe un paquete destinado a un host en una red conectada directamente, lo reenviar√° directamente al host de destino (en una trama dirigida a la direcci√≥n MAC del host).</li>
<li>Una ruta local es una ruta a la misma direcci√≥n IP configurada en la interfaz. Las rutas locales utilizan un prefijo /32 para especificar una √∫nica direcci√≥n IP. Si un router recibe un paquete destinado a la direcci√≥n IP de una ruta local, significa que el paquete est√° destinado al propio router; este lo recibir√° para s√≠ mismo, no lo reenviar√°.</li>
<li>Una ruta a m√°s de una direcci√≥n IP de destino (cualquier ruta con un prefijo menor que /32) se denomina ruta de red. Una ruta conectada es un ejemplo de ruta de red.</li>
<li>Una ruta a una √∫nica direcci√≥n IP de destino (una ruta con un prefijo /32) se denomina ruta de host. Una ruta local es un ejemplo de ruta de host. El proceso de decidir qu√© ruta es la adecuada para reenviar un paquete se denomina selecci√≥n de ruta. Para determinar c√≥mo reenviar un paquete en particular, el router seleccionar√° la ruta m√°s espec√≠fica (la que tenga el prefijo m√°s largo).</li>
<li>Una ruta /32 es la m√°s espec√≠fica posible; especifica solo una direcci√≥n IP. Una ruta /0 (ruta predeterminada) es la menos espec√≠fica posible; especifica todas las direcciones IP posibles.</li>
<li>Mientras que el reenv√≠o de capa 3 implica buscar en la tabla de enrutamiento la ruta m√°s espec√≠fica, el reenv√≠o de capa 2 implica buscar una coincidencia exacta en la tabla de direcciones MAC; las coincidencias parciales no cuentan.</li>
<li>Si no hay rutas que coincidan con la direcci√≥n IP de destino de un paquete, el router lo descartar√°.</li>
<li>Para enrutar paquetes a destinos que no est√°n conectados directamente al router, este necesita aprender las rutas a esos destinos mediante enrutamiento din√°mico (mediante un protocolo como OSPF) o enrutamiento est√°tico (en el que las rutas se configuran manualmente en el router). Para reenviar un paquete a un destino remoto, el router lo encapsula en una trama destinada a la direcci√≥n MAC del siguiente salto (el siguiente router en la ruta hacia el destino).</li>
<li>Para que un router reenv√≠e paquetes entre dos hosts, necesita rutas a la red de cada host; no necesita rutas a todas las redes en la ruta entre cada destino.</li>
<li>El comando para configurar una ruta est√°tica es ip route destination-network netmask {next-hop | exit-interface | exit-interface next-hop}.</li>
<li>Una ruta est√°tica que especifica solo el siguiente salto se denomina ruta est√°tica recursiva; requiere m√∫ltiples b√∫squedas en la tabla de enrutamiento para reenviar un paquete: una para encontrar la direcci√≥n IP del siguiente salto y otra para encontrar la interfaz a la que est√° conectado el siguiente salto.</li>
<li>Una ruta est√°tica que especifica solo la interfaz de salida se denomina ruta est√°tica conectada directamente porque hace que el router trate la red como una red conectada directamente.</li>
<li>Las rutas est√°ticas conectadas directamente requieren ARP proxy para funcionar. ARP proxy permite que un router responda a las solicitudes ARP en nombre de otros hosts. El proxy ARP est√° habilitado en los routers Cisco de forma predeterminada, pero podr√≠a no estarlo en los routers de otros proveedores.</li>
<li>Una ruta est√°tica que especifica tanto la interfaz de salida como el siguiente salto se denomina ruta est√°tica completamente especificada.</li>
<li>Una ruta predeterminada es una ruta a 0.0.0.0/0. Al ser la ruta menos espec√≠fica posible, solo se utilizar√° para reenviar paquetes que no coincidan con ninguna otra ruta en la tabla de enrutamiento.</li>
<li>Si un router tiene una ruta predeterminada, no descartar√° los paquetes que no coincidan con otras rutas; en su lugar, los reenviar√° utilizando la ruta predeterminada.</li>
<li>La ruta predeterminada se utiliza a menudo para proporcionar una ruta a internet; no es posible que un router aprenda rutas espec√≠ficas para cada posible...</li>
</ul>











  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-circle-arrow-up" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="m16 12-4-4-4 4M12 16V8"/></svg>
  Volver al principio
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://zensical.org/" target="_blank" rel="noopener">
      Zensical
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      
      <script id="__config" type="application/json">{"annotate":null,"base":"..","features":["navigation.top","toc.integrate","search.highlight","content.code.annotate","content.code.copy"],"search":"../assets/javascripts/workers/search.e2d2d235.min.js","tags":null,"translations":{"clipboard.copied":"Copiado al portapapeles","clipboard.copy":"Copiar al portapapeles","search.result.more.one":"1 m√°s en esta p√°gina","search.result.more.other":"# m√°s en esta p√°gina","search.result.none":"No se encontraron documentos","search.result.one":"1 documento encontrado","search.result.other":"# documentos encontrados","search.result.placeholder":"Teclee para comenzar b√∫squeda","search.result.term.missing":"Falta","select.version":"Seleccionar versi√≥n"},"version":null}</script>
    
    
      <script src="../assets/javascripts/bundle.00c35305.min.js"></script>
      
        <script src="../javascripts/katex.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/katex.min.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/contrib/auto-render.min.js"></script>
      
    
  </body>
</html>